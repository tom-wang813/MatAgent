{"ast":null,"code":"var _jsxFileName = \"/Users/wang-work/matagent/frontend/src/components/ChatWindow.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { Box, TextField, Button, Typography, CircularProgress, Paper, Avatar, Chip, Accordion, AccordionSummary, AccordionDetails } from '@mui/material';\nimport SendIcon from '@mui/icons-material/Send';\nimport SmartToyIcon from '@mui/icons-material/SmartToy';\nimport PersonIcon from '@mui/icons-material/Person';\nimport ErrorOutlineIcon from '@mui/icons-material/ErrorOutline';\nimport InfoOutlinedIcon from '@mui/icons-material/InfoOutlined';\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\nimport ExpandLessIcon from '@mui/icons-material/ExpandLess';\nimport SettingsIcon from '@mui/icons-material/Settings';\nimport ReactMarkdown from 'react-markdown';\nimport remarkMath from 'remark-math';\nimport rehypeKatex from 'rehype-katex';\nimport 'katex/dist/katex.min.css'; // Import KaTeX CSS\nimport ToolCallDisplay from './ToolCallDisplay';\nimport { sendMessage } from '../utils/api'; // Import sendMessage from api.js\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst MAX_TOOL_OUTPUT_LENGTH = 200; // Define max length for tool output display\n\n// Helper function to group agent steps into logical turns\nconst groupAgentSteps = steps => {\n  const grouped = [];\n  let currentGroup = null;\n  let toolOutputs = []; // Track multiple tool outputs for a single tool_calls\n\n  steps.forEach(step => {\n    if (step.type === 'thought') {\n      // If we have a previous group, push it before starting a new one\n      if (currentGroup) {\n        if (toolOutputs.length > 0) {\n          currentGroup.tool_outputs = toolOutputs;\n          toolOutputs = [];\n        }\n        grouped.push(currentGroup);\n      }\n      currentGroup = {\n        thought: step.content,\n        tool_calls: [],\n        tool_outputs: []\n      };\n    } else if (step.type === 'tool_calls') {\n      if (!currentGroup) {\n        currentGroup = {\n          thought: null,\n          tool_calls: [],\n          tool_outputs: []\n        };\n      }\n      // Concatenate all tool calls for this group\n      currentGroup.tool_calls = currentGroup.tool_calls.concat(step.content);\n    } else if (step.type === 'tool_output') {\n      // Collect tool outputs - there might be multiple for one tool_calls\n      try {\n        const outputData = typeof step.content === 'string' ? JSON.parse(step.content) : step.content;\n        toolOutputs.push(outputData);\n      } catch (e) {\n        toolOutputs.push(step.content);\n      }\n    } else if (step.type === 'final_answer') {\n      // Final answer ends any current group\n      if (currentGroup) {\n        if (toolOutputs.length > 0) {\n          currentGroup.tool_outputs = toolOutputs;\n          toolOutputs = [];\n        }\n        grouped.push(currentGroup);\n        currentGroup = null;\n      }\n    }\n  });\n\n  // Push any remaining group\n  if (currentGroup) {\n    if (toolOutputs.length > 0) {\n      currentGroup.tool_outputs = toolOutputs;\n    }\n    grouped.push(currentGroup);\n  }\n  return grouped;\n};\nconst ToolOutputContent = ({\n  output\n}) => {\n  _s();\n  const [showFull, setShowFull] = useState(false);\n  const isLong = output && output.length > MAX_TOOL_OUTPUT_LENGTH;\n  const displayedOutput = isLong && !showFull ? output.substring(0, MAX_TOOL_OUTPUT_LENGTH) + '...' : output;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      component: \"div\",\n      sx: {\n        mt: 1\n      },\n      children: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n        children: displayedOutput\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), isLong && /*#__PURE__*/_jsxDEV(Button, {\n      onClick: () => setShowFull(!showFull),\n      size: \"small\",\n      endIcon: showFull ? /*#__PURE__*/_jsxDEV(ExpandLessIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 31\n      }, this) : /*#__PURE__*/_jsxDEV(ExpandMoreIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 52\n      }, this),\n      sx: {\n        mt: 0.5\n      } // Adjusted margin top for consistency\n      ,\n      children: showFull ? 'Show Less' : 'Show More'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n\n// Component for collapsible agent steps\n_s(ToolOutputContent, \"pKhLrGiqJ/shax9lT5YShYWwMm0=\");\n_c = ToolOutputContent;\nconst AgentStepsDisplay = ({\n  agentSteps,\n  defaultExpanded = false\n}) => {\n  _s2();\n  const [expanded, setExpanded] = useState(defaultExpanded);\n  const groupedSteps = groupAgentSteps(agentSteps);\n  if (!agentSteps || agentSteps.length === 0) {\n    return null;\n  }\n  const getSummary = () => {\n    const thoughtCount = groupedSteps.filter(step => step.thought).length;\n    const toolCallCount = groupedSteps.reduce((acc, step) => {\n      var _step$tool_calls;\n      return acc + (((_step$tool_calls = step.tool_calls) === null || _step$tool_calls === void 0 ? void 0 : _step$tool_calls.length) || 0);\n    }, 0);\n    const outputCount = groupedSteps.reduce((acc, step) => {\n      var _step$tool_outputs;\n      return acc + (((_step$tool_outputs = step.tool_outputs) === null || _step$tool_outputs === void 0 ? void 0 : _step$tool_outputs.length) || 0);\n    }, 0);\n    return `${groupedSteps.length} 步骤 • ${thoughtCount} 思考 • ${toolCallCount} 工具调用 • ${outputCount} 输出`;\n  };\n  return /*#__PURE__*/_jsxDEV(Accordion, {\n    expanded: expanded,\n    onChange: (event, isExpanded) => setExpanded(isExpanded),\n    sx: {\n      mb: 1,\n      '&:before': {\n        display: 'none'\n      }\n    },\n    children: [/*#__PURE__*/_jsxDEV(AccordionSummary, {\n      expandIcon: /*#__PURE__*/_jsxDEV(ExpandMoreIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 21\n      }, this),\n      sx: {\n        bgcolor: 'grey.50',\n        minHeight: 40,\n        '& .MuiAccordionSummary-content': {\n          margin: '8px 0'\n        }\n      },\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          alignItems: 'center',\n          gap: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(SettingsIcon, {\n          fontSize: \"small\",\n          color: \"action\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          color: \"text.secondary\",\n          children: getSummary()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AccordionDetails, {\n      sx: {\n        pt: 1\n      },\n      children: groupedSteps.map((stepGroup, groupIndex) => /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          mb: 1,\n          p: 1,\n          bgcolor: 'grey.50',\n          borderRadius: 1\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"subtitle2\",\n          children: [\"\\u6B65\\u9AA4 \", groupIndex + 1]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 13\n        }, this), stepGroup.thought && /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body2\",\n          sx: {\n            mt: 0.5\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Agent Thought:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 17\n          }, this), \" \", /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n            children: stepGroup.thought\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 49\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 15\n        }, this), stepGroup.tool_calls && stepGroup.tool_calls.length > 0 && /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mt: 0.5\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Tool Calls:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 45\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(ToolCallDisplay, {\n            toolCalls: stepGroup.tool_calls\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 15\n        }, this), stepGroup.tool_outputs && stepGroup.tool_outputs.length > 0 && /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mt: 0.5\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Tool Outputs:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 45\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 17\n          }, this), stepGroup.tool_outputs.map((output, outputIndex) => /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              mt: 0.5,\n              pl: 1,\n              borderLeft: '2px solid',\n              borderColor: 'grey.300'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"caption\",\n              color: \"text.secondary\",\n              children: [\"Output \", outputIndex + 1, \":\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(ToolOutputContent, {\n              output: JSON.stringify(output)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 21\n            }, this)]\n          }, outputIndex, true, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 19\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 15\n        }, this)]\n      }, groupIndex, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 5\n  }, this);\n};\n_s2(AgentStepsDisplay, \"Oe0RblL+MHZQ50IhWCwh27MpZCs=\");\n_c2 = AgentStepsDisplay;\nconst ChatWindow = ({\n  conversation,\n  onSendMessage,\n  onUpdateTitle,\n  isLoading,\n  setIsLoading,\n  onUpdateConversationUuid // New prop to update conversation_uuid\n}) => {\n  _s3();\n  const [inputValue, setInputValue] = useState('');\n  const [currentAssistantMessage, setCurrentAssistantMessage] = useState(null);\n  const eventSourceRef = useRef(null); // To store the EventSource instance\n  const messagesEndRef = useRef(null);\n  const textareaRef = useRef(null);\n  const [currentConversationUuid, setCurrentConversationUuid] = useState((conversation === null || conversation === void 0 ? void 0 : conversation.uuid) || null); // New state for conversation_uuid\n\n  useEffect(() => {\n    if (conversation !== null && conversation !== void 0 && conversation.uuid) {\n      setCurrentConversationUuid(conversation.uuid);\n    }\n  }, [conversation === null || conversation === void 0 ? void 0 : conversation.uuid]);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  useEffect(() => {\n    scrollToBottom();\n  }, [conversation === null || conversation === void 0 ? void 0 : conversation.messages, currentAssistantMessage]);\n  const handleKeyPress = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSubmit(e);\n    }\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!inputValue.trim() || isLoading || !conversation) return;\n    const userMessage = {\n      id: Date.now().toString(),\n      type: 'user',\n      content: inputValue.trim(),\n      timestamp: new Date().toISOString()\n    };\n    onSendMessage(conversation.id, userMessage);\n    if (conversation.messages.length === 0) {\n      const title = inputValue.trim().length > 30 ? inputValue.trim().substring(0, 30) + '...' : inputValue.trim();\n      onUpdateTitle(conversation.id, title);\n    }\n    const currentInput = inputValue;\n    setInputValue('');\n    setIsLoading(true);\n\n    // Initialize a new assistant message for streaming\n    const newAssistantMessage = {\n      id: (Date.now() + 1).toString(),\n      type: 'assistant',\n      content: '',\n      timestamp: new Date().toISOString(),\n      agent_steps: [],\n      status: 'pending'\n    };\n    setCurrentAssistantMessage(newAssistantMessage);\n\n    // Close any existing EventSource connection before starting a new one\n    if (eventSourceRef.current) {\n      eventSourceRef.current.close();\n    }\n    try {\n      eventSourceRef.current = sendMessage(currentInput, currentConversationUuid, step => {\n        // onNewStep callback\n        setCurrentAssistantMessage(prev => {\n          // Ensure prev is not null before spreading\n          const updatedMessage = prev ? {\n            ...prev\n          } : {\n            id: (Date.now() + 1).toString(),\n            type: 'assistant',\n            content: '',\n            timestamp: new Date().toISOString(),\n            agent_steps: [],\n            status: 'pending'\n          };\n          if (step.type === 'conversation_info') {\n            if (step.conversation_uuid) {\n              setCurrentConversationUuid(step.conversation_uuid);\n              onUpdateConversationUuid(conversation.id, step.conversation_uuid);\n            }\n          } else if (step.type === 'text_chunk') {\n            updatedMessage.content += step.content;\n          } else if (step.type === 'final_answer') {\n            updatedMessage.content = step.content;\n            updatedMessage.status = 'success';\n          } else if (step.type === 'error') {\n            updatedMessage.content = step.content;\n            updatedMessage.status = 'error';\n          } else if (step.type === 'end') {\n            // This marks the end of the stream\n            updatedMessage.status = updatedMessage.status === 'error' ? 'error' : 'success'; // Preserve error status if any\n            setIsLoading(false);\n            if (eventSourceRef.current) {\n              eventSourceRef.current.close();\n            }\n          } else {\n            // For thought, tool_calls, tool_output, append to agent_steps\n            updatedMessage.agent_steps = [...updatedMessage.agent_steps, step];\n          }\n          return updatedMessage;\n        });\n      }, error => {\n        // onError callback\n        console.error('Error during streaming message:', error);\n        let errorMessage = '連接錯誤';\n        if (error.message) {\n          if (error.message.includes('SSE連接錯誤')) {\n            errorMessage = '與服務器的連接中斷，請檢查網絡連接並重試';\n          } else if (error.message.includes('fetch')) {\n            errorMessage = '無法連接到服務器，請確保服務正在運行';\n          } else if (error.message.includes('Invalid URL')) {\n            errorMessage = 'API 配置錯誤，請聯繫管理員';\n          } else {\n            errorMessage = error.message;\n          }\n        }\n        setCurrentAssistantMessage(prev => ({\n          ...prev,\n          content: `錯誤: ${errorMessage}`,\n          status: 'error'\n        }));\n        setIsLoading(false); // Stop loading on error\n      }, () => {\n        // onOpen callback\n        // Optional: handle connection open\n        console.log('SSE connection opened successfully.');\n      });\n    } catch (error) {\n      console.error('Error initiating streaming message:', error);\n      let errorMessage = '無法啟動對話';\n      if (error.message) {\n        if (error.message.includes('Invalid URL')) {\n          errorMessage = 'API 配置錯誤，請聯繫管理員';\n        } else if (error.message.includes('fetch')) {\n          errorMessage = '無法連接到服務器，請確保服務正在運行';\n        } else {\n          errorMessage = error.message;\n        }\n      }\n      setCurrentAssistantMessage(prev => ({\n        ...prev,\n        content: `抱歉，无法启动对话：${errorMessage}。请稍后再试。`,\n        status: 'error'\n      }));\n      setIsLoading(false);\n    } finally {\n      // The EventSource will be closed by the onError or when the stream naturally ends.\n      // We set isLoading to false when the 'end' signal is received or on error.\n      // The 'end' signal handling needs to be inside onNewStep for type 'end'.\n    }\n  };\n\n  // Effect to close EventSource when component unmounts\n  useEffect(() => {\n    return () => {\n      if (eventSourceRef.current) {\n        eventSourceRef.current.close();\n      }\n    };\n  }, []);\n\n  // Effect to add the completed assistant message to conversation messages\n  useEffect(() => {\n    // Only add if currentAssistantMessage exists, is not loading, and has a final status\n    if (currentAssistantMessage && !isLoading && (currentAssistantMessage.status === 'success' || currentAssistantMessage.status === 'error')) {\n      onSendMessage(conversation.id, currentAssistantMessage);\n      setCurrentAssistantMessage(null); // Clear current message\n    }\n  }, [isLoading, currentAssistantMessage, conversation, onSendMessage]);\n  const adjustTextareaHeight = () => {\n    const textarea = textareaRef.current;\n    if (textarea) {\n      textarea.style.height = 'auto';\n      textarea.style.height = Math.min(textarea.scrollHeight, 120) + 'px';\n    }\n  };\n  useEffect(() => {\n    adjustTextareaHeight();\n  }, [inputValue]);\n  const formatTime = timestamp => {\n    return new Date(timestamp).toLocaleTimeString('zh-CN', {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n  if (!conversation) {\n    return /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        flexGrow: 1,\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n        p: 3,\n        textAlign: 'center',\n        color: 'text.secondary'\n      },\n      children: [/*#__PURE__*/_jsxDEV(SmartToyIcon, {\n        sx: {\n          fontSize: 80,\n          mb: 2\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h5\",\n        component: \"h3\",\n        gutterBottom: true,\n        children: \"\\u6B22\\u8FCE\\u4F7F\\u7528 BioaGen Agent\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body1\",\n        sx: {\n          maxWidth: 500\n        },\n        children: \"\\u8FD9\\u662F\\u4E00\\u4E2A\\u57FA\\u4E8EAI\\u7684\\u751F\\u7269\\u5206\\u5B50\\u5206\\u6790\\u52A9\\u624B\\u3002\\u60A8\\u53EF\\u4EE5\\u8BE2\\u95EE\\u6709\\u5173\\u5206\\u5B50\\u7ED3\\u6784\\u3001\\u6027\\u8D28\\u9884\\u6D4B\\u3001 \\u5316\\u5B66\\u53CD\\u5E94\\u7B49\\u76F8\\u5173\\u95EE\\u9898\\u3002\\u70B9\\u51FB\\u5DE6\\u4FA7\\\"\\u65B0\\u5EFA\\u5BF9\\u8BDD\\\"\\u5F00\\u59CB\\u60A8\\u7684\\u5206\\u6790\\u4E4B\\u65C5\\u3002\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      flexGrow: 1,\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%',\n      overflow: 'hidden'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: 2,\n        borderBottom: '1px solid',\n        borderColor: 'divider'\n      },\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        children: conversation.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 413,\n      columnNumber: 7\n    }, this), conversation.available_tools && conversation.available_tools.length > 0 && /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: 2,\n        bgcolor: 'action.hover',\n        borderBottom: '1px solid',\n        borderColor: 'divider'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"subtitle2\",\n        gutterBottom: true,\n        children: \"Available Tools:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        component: \"ul\",\n        sx: {\n          listStyle: 'none',\n          p: 0,\n          m: 0\n        },\n        children: conversation.available_tools.map((tool, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: /*#__PURE__*/_jsxDEV(Chip, {\n            label: `${tool.function.name}: ${tool.function.description}`,\n            size: \"small\",\n            sx: {\n              mb: 0.5\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 423,\n            columnNumber: 17\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        flexGrow: 1,\n        overflowY: 'auto',\n        p: 2\n      },\n      children: [conversation.messages.map(message => /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          mb: 2,\n          justifyContent: message.type === 'user' ? 'flex-end' : 'flex-start'\n        },\n        children: [message.type === 'assistant' && /*#__PURE__*/_jsxDEV(Avatar, {\n          sx: {\n            bgcolor: 'primary.main',\n            mr: 1\n          },\n          children: /*#__PURE__*/_jsxDEV(SmartToyIcon, {\n            fontSize: \"small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 438,\n            columnNumber: 63\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Paper, {\n          elevation: 1,\n          sx: {\n            p: 1,\n            borderRadius: 1,\n            maxWidth: '70%',\n            bgcolor: message.type === 'user' ? 'primary.light' : 'background.paper',\n            color: message.type === 'user' ? 'primary.contrastText' : 'text.primary'\n          },\n          children: [/*#__PURE__*/_jsxDEV(AgentStepsDisplay, {\n            agentSteps: message.agent_steps,\n            defaultExpanded: false\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 447,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            component: \"div\",\n            children: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n              remarkPlugins: [remarkMath],\n              rehypePlugins: [rehypeKatex],\n              children: message.content\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 449,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 448,\n            columnNumber: 15\n          }, this), message.status && message.status !== 'success' && /*#__PURE__*/_jsxDEV(Chip, {\n            icon: message.status === 'error' ? /*#__PURE__*/_jsxDEV(ErrorOutlineIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 54\n            }, this) : /*#__PURE__*/_jsxDEV(InfoOutlinedIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 77\n            }, this),\n            label: message.status === 'error' ? '执行失败' : '部分成功',\n            size: \"small\",\n            color: message.status === 'error' ? 'error' : 'warning',\n            sx: {\n              mt: 1\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"caption\",\n            color: \"text.secondary\",\n            sx: {\n              display: 'block',\n              mt: 0.5\n            },\n            children: formatTime(message.timestamp)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 466,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 13\n        }, this), message.type === 'user' && /*#__PURE__*/_jsxDEV(Avatar, {\n          sx: {\n            bgcolor: 'secondary.main',\n            ml: 1\n          },\n          children: /*#__PURE__*/_jsxDEV(PersonIcon, {\n            fontSize: \"small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 471,\n            columnNumber: 65\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 471,\n          columnNumber: 15\n        }, this)]\n      }, message.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 11\n      }, this)), currentAssistantMessage && /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          mb: 2,\n          justifyContent: 'flex-start'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Avatar, {\n          sx: {\n            bgcolor: 'primary.main',\n            mr: 1\n          },\n          children: /*#__PURE__*/_jsxDEV(SmartToyIcon, {\n            fontSize: \"small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 483,\n            columnNumber: 61\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Paper, {\n          elevation: 1,\n          sx: {\n            p: 1,\n            borderRadius: 1,\n            maxWidth: '70%',\n            bgcolor: 'background.paper',\n            color: 'text.primary'\n          },\n          children: [currentAssistantMessage.agent_steps && currentAssistantMessage.agent_steps.length > 0 && /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              mb: 1\n            },\n            children: groupAgentSteps(currentAssistantMessage.agent_steps).map((stepGroup, groupIndex) => /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                mb: 1,\n                p: 1,\n                bgcolor: 'grey.50',\n                borderRadius: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"subtitle2\",\n                children: [\"\\u6B65\\u9AA4 \", groupIndex + 1]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 495,\n                columnNumber: 23\n              }, this), stepGroup.thought && /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                sx: {\n                  mt: 0.5\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Agent Thought:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 498,\n                  columnNumber: 27\n                }, this), \" \", /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n                  children: stepGroup.thought\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 498,\n                  columnNumber: 59\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 497,\n                columnNumber: 25\n              }, this), stepGroup.tool_calls && stepGroup.tool_calls.length > 0 && /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  mt: 0.5\n                },\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body2\",\n                  children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Tool Calls:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 503,\n                    columnNumber: 55\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 503,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(ToolCallDisplay, {\n                  toolCalls: stepGroup.tool_calls\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 504,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 502,\n                columnNumber: 25\n              }, this), stepGroup.tool_outputs && stepGroup.tool_outputs.length > 0 && /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  mt: 0.5\n                },\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body2\",\n                  children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                    children: \"Tool Outputs:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 509,\n                    columnNumber: 55\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 509,\n                  columnNumber: 27\n                }, this), stepGroup.tool_outputs.map((output, outputIndex) => /*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    mt: 0.5,\n                    pl: 1,\n                    borderLeft: '2px solid',\n                    borderColor: 'grey.300'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"caption\",\n                    color: \"text.secondary\",\n                    children: [\"Output \", outputIndex + 1, \":\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 512,\n                    columnNumber: 31\n                  }, this), /*#__PURE__*/_jsxDEV(ToolOutputContent, {\n                    output: JSON.stringify(output)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 513,\n                    columnNumber: 31\n                  }, this)]\n                }, outputIndex, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 511,\n                  columnNumber: 29\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 508,\n                columnNumber: 25\n              }, this)]\n            }, groupIndex, true, {\n              fileName: _jsxFileName,\n              lineNumber: 494,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 492,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            component: \"div\",\n            children: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n              remarkPlugins: [remarkMath],\n              rehypePlugins: [rehypeKatex],\n              children: currentAssistantMessage.content\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 523,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 522,\n            columnNumber: 15\n          }, this), isLoading && /*#__PURE__*/_jsxDEV(CircularProgress, {\n            size: 20,\n            sx: {\n              mt: 1\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 529,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 484,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 478,\n        columnNumber: 11\n      }, this), isLoading && !currentAssistantMessage && /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          mb: 2,\n          justifyContent: 'flex-start'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Avatar, {\n          sx: {\n            bgcolor: 'primary.main',\n            mr: 1\n          },\n          children: /*#__PURE__*/_jsxDEV(SmartToyIcon, {\n            fontSize: \"small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 541,\n            columnNumber: 61\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 541,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Paper, {\n          elevation: 1,\n          sx: {\n            p: 1,\n            borderRadius: 1,\n            maxWidth: '70%',\n            bgcolor: 'background.paper',\n            color: 'text.primary'\n          },\n          children: [/*#__PURE__*/_jsxDEV(CircularProgress, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 549,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            sx: {\n              mt: 1\n            },\n            children: \"\\u6B63\\u5728\\u601D\\u8003\\u4E2D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 550,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 542,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 536,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 554,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 430,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        p: 2,\n        borderTop: '1px solid',\n        borderColor: 'divider',\n        display: 'flex',\n        alignItems: 'flex-end',\n        gap: 1\n      },\n      children: [/*#__PURE__*/_jsxDEV(TextField, {\n        fullWidth: true,\n        multiline: true,\n        maxRows: 4,\n        value: inputValue,\n        onChange: e => setInputValue(e.target.value),\n        onKeyPress: handleKeyPress,\n        placeholder: \"\\u8F93\\u5165\\u60A8\\u7684\\u95EE\\u9898...\\u4F8B\\u5982\\uFF1A\\u5206\\u6790\\u4E59\\u9187\\u5206\\u5B50\\u7684\\u6027\\u8D28\",\n        variant: \"outlined\",\n        size: \"small\",\n        disabled: isLoading,\n        inputRef: textareaRef,\n        sx: {\n          flexGrow: 1\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 558,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        endIcon: /*#__PURE__*/_jsxDEV(SendIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 574,\n          columnNumber: 20\n        }, this),\n        onClick: handleSubmit,\n        disabled: !inputValue.trim() || isLoading,\n        sx: {\n          height: '40px'\n        } // Adjust height to match TextField\n        ,\n        children: \"\\u53D1\\u9001\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 572,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 557,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 406,\n    columnNumber: 5\n  }, this);\n};\n_s3(ChatWindow, \"TPGmSkwyAuVuYeCns7jgHuWVsYA=\");\n_c3 = ChatWindow;\nexport default ChatWindow;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"ToolOutputContent\");\n$RefreshReg$(_c2, \"AgentStepsDisplay\");\n$RefreshReg$(_c3, \"ChatWindow\");","map":{"version":3,"names":["React","useState","useRef","useEffect","Box","TextField","Button","Typography","CircularProgress","Paper","Avatar","Chip","Accordion","AccordionSummary","AccordionDetails","SendIcon","SmartToyIcon","PersonIcon","ErrorOutlineIcon","InfoOutlinedIcon","ExpandMoreIcon","ExpandLessIcon","SettingsIcon","ReactMarkdown","remarkMath","rehypeKatex","ToolCallDisplay","sendMessage","jsxDEV","_jsxDEV","Fragment","_Fragment","MAX_TOOL_OUTPUT_LENGTH","groupAgentSteps","steps","grouped","currentGroup","toolOutputs","forEach","step","type","length","tool_outputs","push","thought","content","tool_calls","concat","outputData","JSON","parse","e","ToolOutputContent","output","_s","showFull","setShowFull","isLong","displayedOutput","substring","children","component","sx","mt","fileName","_jsxFileName","lineNumber","columnNumber","onClick","size","endIcon","_c","AgentStepsDisplay","agentSteps","defaultExpanded","_s2","expanded","setExpanded","groupedSteps","getSummary","thoughtCount","filter","toolCallCount","reduce","acc","_step$tool_calls","outputCount","_step$tool_outputs","onChange","event","isExpanded","mb","display","expandIcon","bgcolor","minHeight","margin","alignItems","gap","fontSize","color","variant","pt","map","stepGroup","groupIndex","p","borderRadius","toolCalls","outputIndex","pl","borderLeft","borderColor","stringify","_c2","ChatWindow","conversation","onSendMessage","onUpdateTitle","isLoading","setIsLoading","onUpdateConversationUuid","_s3","inputValue","setInputValue","currentAssistantMessage","setCurrentAssistantMessage","eventSourceRef","messagesEndRef","textareaRef","currentConversationUuid","setCurrentConversationUuid","uuid","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","messages","handleKeyPress","key","shiftKey","preventDefault","handleSubmit","trim","userMessage","id","Date","now","toString","timestamp","toISOString","title","currentInput","newAssistantMessage","agent_steps","status","close","prev","updatedMessage","conversation_uuid","error","console","errorMessage","message","includes","log","adjustTextareaHeight","textarea","style","height","Math","min","scrollHeight","formatTime","toLocaleTimeString","hour","minute","flexGrow","flexDirection","justifyContent","textAlign","gutterBottom","maxWidth","overflow","borderBottom","available_tools","listStyle","m","tool","index","label","function","name","description","overflowY","mr","elevation","remarkPlugins","rehypePlugins","icon","ml","ref","borderTop","fullWidth","multiline","maxRows","value","target","onKeyPress","placeholder","disabled","inputRef","_c3","$RefreshReg$"],"sources":["/Users/wang-work/matagent/frontend/src/components/ChatWindow.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { Box, TextField, Button, Typography, CircularProgress, Paper, Avatar, Chip, Accordion, AccordionSummary, AccordionDetails } from '@mui/material';\nimport SendIcon from '@mui/icons-material/Send';\nimport SmartToyIcon from '@mui/icons-material/SmartToy';\nimport PersonIcon from '@mui/icons-material/Person';\nimport ErrorOutlineIcon from '@mui/icons-material/ErrorOutline';\nimport InfoOutlinedIcon from '@mui/icons-material/InfoOutlined';\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\nimport ExpandLessIcon from '@mui/icons-material/ExpandLess';\nimport SettingsIcon from '@mui/icons-material/Settings';\nimport ReactMarkdown from 'react-markdown';\nimport remarkMath from 'remark-math';\nimport rehypeKatex from 'rehype-katex';\nimport 'katex/dist/katex.min.css'; // Import KaTeX CSS\nimport ToolCallDisplay from './ToolCallDisplay';\nimport { sendMessage } from '../utils/api'; // Import sendMessage from api.js\n\nconst MAX_TOOL_OUTPUT_LENGTH = 200; // Define max length for tool output display\n\n// Helper function to group agent steps into logical turns\nconst groupAgentSteps = (steps) => {\n  const grouped = [];\n  let currentGroup = null;\n  let toolOutputs = []; // Track multiple tool outputs for a single tool_calls\n\n  steps.forEach(step => {\n    if (step.type === 'thought') {\n      // If we have a previous group, push it before starting a new one\n      if (currentGroup) {\n        if (toolOutputs.length > 0) {\n          currentGroup.tool_outputs = toolOutputs;\n          toolOutputs = [];\n        }\n        grouped.push(currentGroup);\n      }\n      currentGroup = { thought: step.content, tool_calls: [], tool_outputs: [] };\n    } else if (step.type === 'tool_calls') {\n      if (!currentGroup) {\n        currentGroup = { thought: null, tool_calls: [], tool_outputs: [] };\n      }\n      // Concatenate all tool calls for this group\n      currentGroup.tool_calls = currentGroup.tool_calls.concat(step.content);\n    } else if (step.type === 'tool_output') {\n      // Collect tool outputs - there might be multiple for one tool_calls\n      try {\n        const outputData = typeof step.content === 'string' ? JSON.parse(step.content) : step.content;\n        toolOutputs.push(outputData);\n      } catch (e) {\n        toolOutputs.push(step.content);\n      }\n    } else if (step.type === 'final_answer') {\n      // Final answer ends any current group\n      if (currentGroup) {\n        if (toolOutputs.length > 0) {\n          currentGroup.tool_outputs = toolOutputs;\n          toolOutputs = [];\n        }\n        grouped.push(currentGroup);\n        currentGroup = null;\n      }\n    }\n  });\n\n  // Push any remaining group\n  if (currentGroup) {\n    if (toolOutputs.length > 0) {\n      currentGroup.tool_outputs = toolOutputs;\n    }\n    grouped.push(currentGroup);\n  }\n\n  return grouped;\n};\n\nconst ToolOutputContent = ({ output }) => {\n  const [showFull, setShowFull] = useState(false);\n  const isLong = output && output.length > MAX_TOOL_OUTPUT_LENGTH;\n  const displayedOutput = isLong && !showFull ? output.substring(0, MAX_TOOL_OUTPUT_LENGTH) + '...' : output;\n\n  return (\n    <>\n      <Typography component=\"div\" sx={{ mt: 1 }}>\n        <ReactMarkdown>{displayedOutput}</ReactMarkdown>\n      </Typography>\n      {isLong && (\n        <Button \n          onClick={() => setShowFull(!showFull)}\n          size=\"small\"\n          endIcon={showFull ? <ExpandLessIcon /> : <ExpandMoreIcon />}\n          sx={{ mt: 0.5 }} // Adjusted margin top for consistency\n        >\n          {showFull ? 'Show Less' : 'Show More'}\n        </Button>\n      )}\n    </>\n  );\n};\n\n// Component for collapsible agent steps\nconst AgentStepsDisplay = ({ agentSteps, defaultExpanded = false }) => {\n  const [expanded, setExpanded] = useState(defaultExpanded);\n  const groupedSteps = groupAgentSteps(agentSteps);\n  \n  if (!agentSteps || agentSteps.length === 0) {\n    return null;\n  }\n\n  const getSummary = () => {\n    const thoughtCount = groupedSteps.filter(step => step.thought).length;\n    const toolCallCount = groupedSteps.reduce((acc, step) => acc + (step.tool_calls?.length || 0), 0);\n    const outputCount = groupedSteps.reduce((acc, step) => acc + (step.tool_outputs?.length || 0), 0);\n    \n    return `${groupedSteps.length} 步骤 • ${thoughtCount} 思考 • ${toolCallCount} 工具调用 • ${outputCount} 输出`;\n  };\n\n  return (\n    <Accordion \n      expanded={expanded} \n      onChange={(event, isExpanded) => setExpanded(isExpanded)}\n      sx={{ mb: 1, '&:before': { display: 'none' } }}\n    >\n      <AccordionSummary\n        expandIcon={<ExpandMoreIcon />}\n        sx={{ \n          bgcolor: 'grey.50', \n          minHeight: 40,\n          '& .MuiAccordionSummary-content': { margin: '8px 0' }\n        }}\n      >\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n          <SettingsIcon fontSize=\"small\" color=\"action\" />\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            {getSummary()}\n          </Typography>\n        </Box>\n      </AccordionSummary>\n      <AccordionDetails sx={{ pt: 1 }}>\n        {groupedSteps.map((stepGroup, groupIndex) => (\n          <Box key={groupIndex} sx={{ mb: 1, p: 1, bgcolor: 'grey.50', borderRadius: 1 }}>\n            <Typography variant=\"subtitle2\">步骤 {groupIndex + 1}</Typography>\n            {stepGroup.thought && (\n              <Typography variant=\"body2\" sx={{ mt: 0.5 }}>\n                <strong>Agent Thought:</strong> <ReactMarkdown>{stepGroup.thought}</ReactMarkdown>\n              </Typography>\n            )}\n            {stepGroup.tool_calls && stepGroup.tool_calls.length > 0 && (\n              <Box sx={{ mt: 0.5 }}>\n                <Typography variant=\"body2\"><strong>Tool Calls:</strong></Typography>\n                <ToolCallDisplay toolCalls={stepGroup.tool_calls} />\n              </Box>\n            )}\n            {stepGroup.tool_outputs && stepGroup.tool_outputs.length > 0 && (\n              <Box sx={{ mt: 0.5 }}>\n                <Typography variant=\"body2\"><strong>Tool Outputs:</strong></Typography>\n                {stepGroup.tool_outputs.map((output, outputIndex) => (\n                  <Box key={outputIndex} sx={{ mt: 0.5, pl: 1, borderLeft: '2px solid', borderColor: 'grey.300' }}>\n                    <Typography variant=\"caption\" color=\"text.secondary\">Output {outputIndex + 1}:</Typography>\n                    <ToolOutputContent output={JSON.stringify(output)} />\n                  </Box>\n                ))}\n              </Box>\n            )}\n          </Box>\n        ))}\n      </AccordionDetails>\n    </Accordion>\n  );\n};\n\nconst ChatWindow = ({\n  conversation,\n  onSendMessage,\n  onUpdateTitle,\n  isLoading,\n  setIsLoading,\n  onUpdateConversationUuid // New prop to update conversation_uuid\n}) => {\n  const [inputValue, setInputValue] = useState('');\n  const [currentAssistantMessage, setCurrentAssistantMessage] = useState(null);\n  const eventSourceRef = useRef(null); // To store the EventSource instance\n  const messagesEndRef = useRef(null);\n  const textareaRef = useRef(null);\n  const [currentConversationUuid, setCurrentConversationUuid] = useState(conversation?.uuid || null); // New state for conversation_uuid\n\n  useEffect(() => {\n    if (conversation?.uuid) {\n      setCurrentConversationUuid(conversation.uuid);\n    }\n  }, [conversation?.uuid]);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [conversation?.messages, currentAssistantMessage]);\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSubmit(e);\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!inputValue.trim() || isLoading || !conversation) return;\n\n    const userMessage = {\n      id: Date.now().toString(),\n      type: 'user',\n      content: inputValue.trim(),\n      timestamp: new Date().toISOString()\n    };\n\n    onSendMessage(conversation.id, userMessage);\n\n    if (conversation.messages.length === 0) {\n      const title = inputValue.trim().length > 30\n        ? inputValue.trim().substring(0, 30) + '...'\n        : inputValue.trim();\n      onUpdateTitle(conversation.id, title);\n    }\n\n    const currentInput = inputValue;\n    setInputValue('');\n    setIsLoading(true);\n\n    // Initialize a new assistant message for streaming\n    const newAssistantMessage = {\n      id: (Date.now() + 1).toString(),\n      type: 'assistant',\n      content: '',\n      timestamp: new Date().toISOString(),\n      agent_steps: [],\n      status: 'pending',\n    };\n    setCurrentAssistantMessage(newAssistantMessage);\n\n    // Close any existing EventSource connection before starting a new one\n    if (eventSourceRef.current) {\n      eventSourceRef.current.close();\n    }\n\n    try {\n      eventSourceRef.current = sendMessage(\n        currentInput,\n        currentConversationUuid,\n        (step) => { // onNewStep callback\n          setCurrentAssistantMessage(prev => {\n            // Ensure prev is not null before spreading\n            const updatedMessage = prev ? { ...prev } : {\n              id: (Date.now() + 1).toString(),\n              type: 'assistant',\n              content: '',\n              timestamp: new Date().toISOString(),\n              agent_steps: [],\n              status: 'pending',\n            };\n\n            if (step.type === 'conversation_info') {\n              if (step.conversation_uuid) {\n                setCurrentConversationUuid(step.conversation_uuid);\n                onUpdateConversationUuid(conversation.id, step.conversation_uuid);\n              }\n            } else if (step.type === 'text_chunk') {\n              updatedMessage.content += step.content;\n            } else if (step.type === 'final_answer') {\n              updatedMessage.content = step.content;\n              updatedMessage.status = 'success';\n            } else if (step.type === 'error') {\n              updatedMessage.content = step.content;\n              updatedMessage.status = 'error';\n            } else if (step.type === 'end') {\n              // This marks the end of the stream\n              updatedMessage.status = updatedMessage.status === 'error' ? 'error' : 'success'; // Preserve error status if any\n              setIsLoading(false);\n              if (eventSourceRef.current) {\n                eventSourceRef.current.close();\n              }\n            } else {\n              // For thought, tool_calls, tool_output, append to agent_steps\n              updatedMessage.agent_steps = [...updatedMessage.agent_steps, step];\n            }\n            return updatedMessage;\n          });\n        },\n        (error) => { // onError callback\n          console.error('Error during streaming message:', error);\n          let errorMessage = '連接錯誤';\n          \n          if (error.message) {\n            if (error.message.includes('SSE連接錯誤')) {\n              errorMessage = '與服務器的連接中斷，請檢查網絡連接並重試';\n            } else if (error.message.includes('fetch')) {\n              errorMessage = '無法連接到服務器，請確保服務正在運行';\n            } else if (error.message.includes('Invalid URL')) {\n              errorMessage = 'API 配置錯誤，請聯繫管理員';\n            } else {\n              errorMessage = error.message;\n            }\n          }\n          \n          setCurrentAssistantMessage(prev => ({\n            ...prev,\n            content: `錯誤: ${errorMessage}`,\n            status: 'error',\n          }));\n          setIsLoading(false); // Stop loading on error\n        },\n        () => { // onOpen callback\n          // Optional: handle connection open\n          console.log('SSE connection opened successfully.');\n        }\n      );\n    } catch (error) {\n      console.error('Error initiating streaming message:', error);\n      let errorMessage = '無法啟動對話';\n      \n      if (error.message) {\n        if (error.message.includes('Invalid URL')) {\n          errorMessage = 'API 配置錯誤，請聯繫管理員';\n        } else if (error.message.includes('fetch')) {\n          errorMessage = '無法連接到服務器，請確保服務正在運行';\n        } else {\n          errorMessage = error.message;\n        }\n      }\n      \n      setCurrentAssistantMessage(prev => ({\n        ...prev,\n        content: `抱歉，无法启动对话：${errorMessage}。请稍后再试。`,\n        status: 'error',\n      }));\n      setIsLoading(false);\n    } finally {\n      // The EventSource will be closed by the onError or when the stream naturally ends.\n      // We set isLoading to false when the 'end' signal is received or on error.\n      // The 'end' signal handling needs to be inside onNewStep for type 'end'.\n    }\n  };\n\n  // Effect to close EventSource when component unmounts\n  useEffect(() => {\n    return () => {\n      if (eventSourceRef.current) {\n        eventSourceRef.current.close();\n      }\n    };\n  }, []);\n\n  // Effect to add the completed assistant message to conversation messages\n  useEffect(() => {\n    // Only add if currentAssistantMessage exists, is not loading, and has a final status\n    if (currentAssistantMessage && !isLoading && (currentAssistantMessage.status === 'success' || currentAssistantMessage.status === 'error')) {\n      onSendMessage(conversation.id, currentAssistantMessage);\n      setCurrentAssistantMessage(null); // Clear current message\n    }\n  }, [isLoading, currentAssistantMessage, conversation, onSendMessage]);\n\n  const adjustTextareaHeight = () => {\n    const textarea = textareaRef.current;\n    if (textarea) {\n      textarea.style.height = 'auto';\n      textarea.style.height = Math.min(textarea.scrollHeight, 120) + 'px';\n    }\n  };\n\n  useEffect(() => {\n    adjustTextareaHeight();\n  }, [inputValue]);\n\n  const formatTime = (timestamp) => {\n    return new Date(timestamp).toLocaleTimeString('zh-CN', {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  if (!conversation) {\n    return (\n      <Box sx={{\n        flexGrow: 1,\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'center',\n        p: 3,\n        textAlign: 'center',\n        color: 'text.secondary',\n      }}>\n        <SmartToyIcon sx={{ fontSize: 80, mb: 2 }} />\n        <Typography variant=\"h5\" component=\"h3\" gutterBottom>\n          欢迎使用 BioaGen Agent\n        </Typography>\n        <Typography variant=\"body1\" sx={{ maxWidth: 500 }}>\n          这是一个基于AI的生物分子分析助手。您可以询问有关分子结构、性质预测、\n          化学反应等相关问题。点击左侧\"新建对话\"开始您的分析之旅。\n        </Typography>\n      </Box>\n    );\n  }\n\n  return (\n    <Box sx={{\n      flexGrow: 1,\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100%',\n      overflow: 'hidden',\n    }}>\n      <Box sx={{ p: 2, borderBottom: '1px solid', borderColor: 'divider' }}>\n        <Typography variant=\"h6\">{conversation.title}</Typography>\n      </Box>\n\n      {conversation.available_tools && conversation.available_tools.length > 0 && (\n        <Box sx={{ p: 2, bgcolor: 'action.hover', borderBottom: '1px solid', borderColor: 'divider' }}>\n          <Typography variant=\"subtitle2\" gutterBottom>Available Tools:</Typography>\n          <Box component=\"ul\" sx={{ listStyle: 'none', p: 0, m: 0 }}>\n            {conversation.available_tools.map((tool, index) => (\n              <li key={index}>\n                <Chip label={`${tool.function.name}: ${tool.function.description}`} size=\"small\" sx={{ mb: 0.5 }} />\n              </li>\n            ))}\n          </Box>\n        </Box>\n      )}\n\n      <Box sx={{ flexGrow: 1, overflowY: 'auto', p: 2 }}>\n        {conversation.messages.map((message) => (\n          <Box key={message.id} sx={{\n            display: 'flex',\n            mb: 2,\n            justifyContent: message.type === 'user' ? 'flex-end' : 'flex-start',\n          }}>\n            {message.type === 'assistant' && (\n              <Avatar sx={{ bgcolor: 'primary.main', mr: 1 }}><SmartToyIcon fontSize=\"small\" /></Avatar>\n            )}\n            <Paper elevation={1} sx={{\n              p: 1,\n              borderRadius: 1,\n              maxWidth: '70%',\n              bgcolor: message.type === 'user' ? 'primary.light' : 'background.paper',\n              color: message.type === 'user' ? 'primary.contrastText' : 'text.primary',\n            }}>\n              <AgentStepsDisplay agentSteps={message.agent_steps} defaultExpanded={false} />\n              <Typography component=\"div\">\n                <ReactMarkdown\n                  remarkPlugins={[remarkMath]}\n                  rehypePlugins={[rehypeKatex]}\n                >{message.content}</ReactMarkdown>\n              </Typography>\n\n              {/* Display status indicator */}\n              {message.status && message.status !== 'success' && (\n                <Chip\n                  icon={message.status === 'error' ? <ErrorOutlineIcon /> : <InfoOutlinedIcon />}\n                  label={message.status === 'error' ? '执行失败' : '部分成功'}\n                  size=\"small\"\n                  color={message.status === 'error' ? 'error' : 'warning'}\n                  sx={{ mt: 1 }}\n                />\n              )}\n\n              <Typography variant=\"caption\" color=\"text.secondary\" sx={{ display: 'block', mt: 0.5 }}>\n                {formatTime(message.timestamp)}\n              </Typography>\n            </Paper>\n            {message.type === 'user' && (\n              <Avatar sx={{ bgcolor: 'secondary.main', ml: 1 }}><PersonIcon fontSize=\"small\" /></Avatar>\n            )}\n          </Box>\n        ))}\n\n        {/* Display the current streaming message */}\n        {currentAssistantMessage && (\n          <Box sx={{\n            display: 'flex',\n            mb: 2,\n            justifyContent: 'flex-start',\n          }}>\n            <Avatar sx={{ bgcolor: 'primary.main', mr: 1 }}><SmartToyIcon fontSize=\"small\" /></Avatar>\n            <Paper elevation={1} sx={{\n              p: 1,\n              borderRadius: 1,\n              maxWidth: '70%',\n              bgcolor: 'background.paper',\n              color: 'text.primary',\n            }}>\n              {currentAssistantMessage.agent_steps && currentAssistantMessage.agent_steps.length > 0 && (\n                <Box sx={{ mb: 1 }}>\n                  {groupAgentSteps(currentAssistantMessage.agent_steps).map((stepGroup, groupIndex) => (\n                    <Box key={groupIndex} sx={{ mb: 1, p: 1, bgcolor: 'grey.50', borderRadius: 1 }}>\n                      <Typography variant=\"subtitle2\">步骤 {groupIndex + 1}</Typography>\n                      {stepGroup.thought && (\n                        <Typography variant=\"body2\" sx={{ mt: 0.5 }}>\n                          <strong>Agent Thought:</strong> <ReactMarkdown>{stepGroup.thought}</ReactMarkdown>\n                        </Typography>\n                      )}\n                      {stepGroup.tool_calls && stepGroup.tool_calls.length > 0 && (\n                        <Box sx={{ mt: 0.5 }}>\n                          <Typography variant=\"body2\"><strong>Tool Calls:</strong></Typography>\n                          <ToolCallDisplay toolCalls={stepGroup.tool_calls} />\n                        </Box>\n                      )}\n                      {stepGroup.tool_outputs && stepGroup.tool_outputs.length > 0 && (\n                        <Box sx={{ mt: 0.5 }}>\n                          <Typography variant=\"body2\"><strong>Tool Outputs:</strong></Typography>\n                          {stepGroup.tool_outputs.map((output, outputIndex) => (\n                            <Box key={outputIndex} sx={{ mt: 0.5, pl: 1, borderLeft: '2px solid', borderColor: 'grey.300' }}>\n                              <Typography variant=\"caption\" color=\"text.secondary\">Output {outputIndex + 1}:</Typography>\n                              <ToolOutputContent output={JSON.stringify(output)} />\n                            </Box>\n                          ))}\n                        </Box>\n                      )}\n                    </Box>\n                  ))}\n                </Box>\n              )}\n              <Typography component=\"div\">\n                <ReactMarkdown\n                  remarkPlugins={[remarkMath]}\n                  rehypePlugins={[rehypeKatex]}\n                >{currentAssistantMessage.content}</ReactMarkdown>\n              </Typography>\n              {isLoading && (\n                <CircularProgress size={20} sx={{ mt: 1 }} />\n              )}\n            </Paper>\n          </Box>\n        )}\n\n        {isLoading && !currentAssistantMessage && (\n          <Box sx={{\n            display: 'flex',\n            mb: 2,\n            justifyContent: 'flex-start',\n          }}>\n            <Avatar sx={{ bgcolor: 'primary.main', mr: 1 }}><SmartToyIcon fontSize=\"small\" /></Avatar>\n            <Paper elevation={1} sx={{\n              p: 1,\n              borderRadius: 1,\n              maxWidth: '70%',\n              bgcolor: 'background.paper',\n              color: 'text.primary',\n            }}>\n              <CircularProgress size={20} />\n              <Typography variant=\"body2\" sx={{ mt: 1 }}>正在思考中</Typography>\n            </Paper>\n          </Box>\n        )}\n        <div ref={messagesEndRef} />\n      </Box>\n\n      <Box sx={{ p: 2, borderTop: '1px solid', borderColor: 'divider', display: 'flex', alignItems: 'flex-end', gap: 1 }}>\n        <TextField\n          fullWidth\n          multiline\n          maxRows={4}\n          value={inputValue}\n          onChange={(e) => setInputValue(e.target.value)}\n          onKeyPress={handleKeyPress}\n          placeholder=\"输入您的问题...例如：分析乙醇分子的性质\"\n          variant=\"outlined\"\n          size=\"small\"\n          disabled={isLoading}\n          inputRef={textareaRef}\n          sx={{ flexGrow: 1 }}\n        />\n        <Button\n          variant=\"contained\"\n          endIcon={<SendIcon />}\n          onClick={handleSubmit}\n          disabled={!inputValue.trim() || isLoading}\n          sx={{ height: '40px' }} // Adjust height to match TextField\n        >\n          发送\n        </Button>\n      </Box>\n    </Box>\n  );\n};\n\nexport default ChatWindow;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}