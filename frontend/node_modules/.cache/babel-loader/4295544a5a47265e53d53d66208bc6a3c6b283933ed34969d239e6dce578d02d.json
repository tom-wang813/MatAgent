{"ast":null,"code":"var _jsxFileName = \"/Users/wang-work/matagent/frontend/src/components/ChatWindow.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { Send, Bot, User, AlertCircle, Info } from 'lucide-react';\nimport ReactMarkdown from 'react-markdown';\nimport remarkMath from 'remark-math';\nimport rehypeKatex from 'rehype-katex';\nimport 'katex/dist/katex.min.css'; // Import KaTeX CSS\nimport ToolCallDisplay from './ToolCallDisplay';\nimport { sendMessage } from '../utils/api'; // Import sendMessage from api.js\n\n// Helper function to group agent steps into logical turns\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst groupAgentSteps = steps => {\n  const grouped = [];\n  let currentGroup = null;\n  steps.forEach(step => {\n    if (step.type === 'thought') {\n      if (currentGroup && (currentGroup.tool_calls.length > 0 || currentGroup.tool_output)) {\n        grouped.push(currentGroup);\n      }\n      currentGroup = {\n        thought: step.content,\n        tool_calls: [],\n        tool_output: null\n      };\n    } else if (step.type === 'tool_calls') {\n      if (!currentGroup) {\n        currentGroup = {\n          thought: null,\n          tool_calls: [],\n          tool_output: null\n        };\n      }\n      currentGroup.tool_calls = currentGroup.tool_calls.concat(step.content); // step.content is now the tool_calls array\n    } else if (step.type === 'tool_output') {\n      if (!currentGroup) {\n        currentGroup = {\n          thought: null,\n          tool_calls: [],\n          tool_output: null\n        };\n      }\n      currentGroup.tool_output = step.content.output; // step.content is now the tool_output object\n      grouped.push(currentGroup); // Tool output usually marks the end of a step\n      currentGroup = null; // Reset for next group\n    } else if (step.type === 'final_answer') {\n      if (currentGroup) {\n        grouped.push(currentGroup);\n      }\n      // Final answer is handled separately, not grouped as a step\n    }\n  });\n  if (currentGroup) {\n    grouped.push(currentGroup);\n  }\n  return grouped;\n};\nconst ChatWindow = ({\n  conversation,\n  onSendMessage,\n  onUpdateTitle,\n  isLoading,\n  setIsLoading\n}) => {\n  _s();\n  const [inputValue, setInputValue] = useState('');\n  const [currentAssistantMessage, setCurrentAssistantMessage] = useState(null);\n  const messagesEndRef = useRef(null);\n  const textareaRef = useRef(null);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  useEffect(() => {\n    scrollToBottom();\n  }, [conversation === null || conversation === void 0 ? void 0 : conversation.messages, currentAssistantMessage]);\n\n  // Effect to add the completed assistant message to conversation messages\n  useEffect(() => {\n    if (currentAssistantMessage && !isLoading && conversation) {\n      onSendMessage(conversation.id, currentAssistantMessage);\n      setCurrentAssistantMessage(null); // Clear current message\n    }\n  }, [isLoading, currentAssistantMessage, conversation, onSendMessage]);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!inputValue.trim() || isLoading || !conversation) return;\n    const userMessage = {\n      id: Date.now().toString(),\n      type: 'user',\n      content: inputValue.trim(),\n      timestamp: new Date().toISOString()\n    };\n    onSendMessage(conversation.id, userMessage);\n    if (conversation.messages.length === 0) {\n      const title = inputValue.trim().length > 30 ? inputValue.trim().substring(0, 30) + '...' : inputValue.trim();\n      onUpdateTitle(conversation.id, title);\n    }\n    const currentInput = inputValue;\n    setInputValue('');\n    setIsLoading(true);\n\n    // Initialize a new assistant message for streaming\n    const newAssistantMessage = {\n      id: (Date.now() + 1).toString(),\n      type: 'assistant',\n      content: '',\n      timestamp: new Date().toISOString(),\n      agent_steps: [],\n      status: 'pending'\n    };\n    setCurrentAssistantMessage(newAssistantMessage);\n    try {\n      await sendMessage(currentInput, conversation.id, step => {\n        setCurrentAssistantMessage(prev => {\n          const updatedMessage = {\n            ...prev\n          };\n          if (step.type === 'final_answer') {\n            updatedMessage.content = step.content;\n            updatedMessage.status = 'success';\n          } else if (step.type === 'error') {\n            updatedMessage.content = step.content;\n            updatedMessage.status = 'error';\n          } else {\n            // For thought, tool_calls, tool_output, append to agent_steps\n            updatedMessage.agent_steps = [...updatedMessage.agent_steps, step];\n          }\n          return updatedMessage;\n        });\n      });\n    } catch (error) {\n      console.error('Error sending message:', error);\n      setCurrentAssistantMessage(prev => ({\n        ...prev,\n        content: `抱歉，发生了错误：${error.message || '未知错误'}。请稍后再试。`,\n        status: 'error'\n      }));\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSubmit(e);\n    }\n  };\n  const adjustTextareaHeight = () => {\n    const textarea = textareaRef.current;\n    if (textarea) {\n      textarea.style.height = 'auto';\n      textarea.style.height = Math.min(textarea.scrollHeight, 120) + 'px';\n    }\n  };\n  useEffect(() => {\n    adjustTextareaHeight();\n  }, [inputValue]);\n  const formatTime = timestamp => {\n    return new Date(timestamp).toLocaleTimeString('zh-CN', {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n  if (!conversation) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-window\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"empty-state\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"empty-state-icon\",\n          children: \"\\uD83E\\uDDEC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"\\u6B22\\u8FCE\\u4F7F\\u7528 BioaGen Agent\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u8FD9\\u662F\\u4E00\\u4E2A\\u57FA\\u4E8EAI\\u7684\\u751F\\u7269\\u5206\\u5B50\\u5206\\u6790\\u52A9\\u624B\\u3002\\u60A8\\u53EF\\u4EE5\\u8BE2\\u95EE\\u6709\\u5173\\u5206\\u5B50\\u7ED3\\u6784\\u3001\\u6027\\u8D28\\u9884\\u6D4B\\u3001 \\u5316\\u5B66\\u53CD\\u5E94\\u7B49\\u76F8\\u5173\\u95EE\\u9898\\u3002\\u70B9\\u51FB\\u5DE6\\u4FA7\\\"\\u65B0\\u5EFA\\u5BF9\\u8BDD\\\"\\u5F00\\u59CB\\u60A8\\u7684\\u5206\\u6790\\u4E4B\\u65C5\\u3002\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-window\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-header\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-title\",\n        children: conversation.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this), conversation.available_tools && conversation.available_tools.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"available-tools-list\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Available Tools:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: conversation.available_tools.map((tool, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: tool.function.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 17\n          }, this), \": \", tool.function.description]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-messages\",\n      children: [conversation.messages.map(message => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `message ${message.type}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message-avatar\",\n          children: message.type === 'user' ? /*#__PURE__*/_jsxDEV(User, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 42\n          }, this) : /*#__PURE__*/_jsxDEV(Bot, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 63\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message-content\",\n          children: [message.agent_steps && message.agent_steps.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"agent-steps-container\",\n            children: groupAgentSteps(message.agent_steps).map((stepGroup, groupIndex) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"agent-step-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: [\"\\u6B65\\u9AA4 \", groupIndex + 1]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 23\n              }, this), stepGroup.thought && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"agent-thought\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Agent Thought:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 213,\n                  columnNumber: 27\n                }, this), \" \", /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n                  children: stepGroup.thought\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 213,\n                  columnNumber: 59\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 25\n              }, this), stepGroup.tool_calls && stepGroup.tool_calls.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"agent-tool-calls\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Tool Calls:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 218,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(ToolCallDisplay, {\n                  toolCalls: stepGroup.tool_calls\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 25\n              }, this), stepGroup.tool_output && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"agent-tool-output\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Tool Output:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 224,\n                  columnNumber: 27\n                }, this), \" \", /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n                  children: JSON.stringify(stepGroup.tool_output)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 224,\n                  columnNumber: 57\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 25\n              }, this)]\n            }, groupIndex, true, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n            remarkPlugins: [remarkMath],\n            rehypePlugins: [rehypeKatex],\n            children: message.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 15\n          }, this), message.status && message.status !== 'success' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `message-status ${message.status}`,\n            children: [message.status === 'error' && /*#__PURE__*/_jsxDEV(AlertCircle, {\n              size: 14\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 50\n            }, this), message.status === 'warning' && /*#__PURE__*/_jsxDEV(Info, {\n              size: 14\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 52\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: message.status === 'error' ? '执行失败' : '部分成功'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message-time\",\n            children: formatTime(message.timestamp)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 13\n        }, this)]\n      }, message.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 11\n      }, this)), currentAssistantMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message assistant\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message-avatar\",\n          children: /*#__PURE__*/_jsxDEV(Bot, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message-content\",\n          children: [currentAssistantMessage.agent_steps && currentAssistantMessage.agent_steps.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"agent-steps-container\",\n            children: groupAgentSteps(currentAssistantMessage.agent_steps).map((stepGroup, groupIndex) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"agent-step-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: [\"\\u6B65\\u9AA4 \", groupIndex + 1]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 23\n              }, this), stepGroup.thought && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"agent-thought\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Agent Thought:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 27\n                }, this), \" \", /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n                  children: stepGroup.thought\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 59\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 25\n              }, this), stepGroup.tool_calls && stepGroup.tool_calls.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"agent-tool-calls\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Tool Calls:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 271,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(ToolCallDisplay, {\n                  toolCalls: stepGroup.tool_calls\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 272,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 25\n              }, this), stepGroup.tool_output && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"agent-tool-output\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: \"Tool Output:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 277,\n                  columnNumber: 27\n                }, this), \" \", /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n                  children: JSON.stringify(stepGroup.tool_output)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 277,\n                  columnNumber: 57\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 25\n              }, this)]\n            }, groupIndex, true, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n            remarkPlugins: [remarkMath],\n            rehypePlugins: [rehypeKatex],\n            children: currentAssistantMessage.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 15\n          }, this), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading-message\",\n            children: [\"\\u6B63\\u5728\\u601D\\u8003\\u4E2D\", /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading-dots\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"loading-dot\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 292,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"loading-dot\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 293,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"loading-dot\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 11\n      }, this), isLoading && !currentAssistantMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message assistant\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message-avatar\",\n          children: /*#__PURE__*/_jsxDEV(Bot, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 305,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message-content\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading-message\",\n            children: [\"\\u6B63\\u5728\\u601D\\u8003\\u4E2D\", /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"loading-dots\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"loading-dot\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"loading-dot\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 312,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"loading-dot\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-input-container\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"chat-input-form\",\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          ref: textareaRef,\n          value: inputValue,\n          onChange: e => setInputValue(e.target.value),\n          onKeyPress: handleKeyPress,\n          placeholder: \"\\u8F93\\u5165\\u60A8\\u7684\\u95EE\\u9898...\\u4F8B\\u5982\\uFF1A\\u5206\\u6790\\u4E59\\u9187\\u5206\\u5B50\\u7684\\u6027\\u8D28\",\n          className: \"chat-input\",\n          rows: 1,\n          disabled: isLoading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"send-btn\",\n          disabled: !inputValue.trim() || isLoading,\n          children: [/*#__PURE__*/_jsxDEV(Send, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 13\n          }, this), \"\\u53D1\\u9001\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 181,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatWindow, \"NI89dTYtCNF8oXQHSHX48uikfTU=\");\n_c = ChatWindow;\nexport default ChatWindow;\nvar _c;\n$RefreshReg$(_c, \"ChatWindow\");","map":{"version":3,"names":["React","useState","useRef","useEffect","Send","Bot","User","AlertCircle","Info","ReactMarkdown","remarkMath","rehypeKatex","ToolCallDisplay","sendMessage","jsxDEV","_jsxDEV","groupAgentSteps","steps","grouped","currentGroup","forEach","step","type","tool_calls","length","tool_output","push","thought","content","concat","output","ChatWindow","conversation","onSendMessage","onUpdateTitle","isLoading","setIsLoading","_s","inputValue","setInputValue","currentAssistantMessage","setCurrentAssistantMessage","messagesEndRef","textareaRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","messages","id","handleSubmit","e","preventDefault","trim","userMessage","Date","now","toString","timestamp","toISOString","title","substring","currentInput","newAssistantMessage","agent_steps","status","prev","updatedMessage","error","console","message","handleKeyPress","key","shiftKey","adjustTextareaHeight","textarea","style","height","Math","min","scrollHeight","formatTime","toLocaleTimeString","hour","minute","className","children","fileName","_jsxFileName","lineNumber","columnNumber","available_tools","map","tool","index","function","name","description","size","stepGroup","groupIndex","toolCalls","JSON","stringify","remarkPlugins","rehypePlugins","ref","onSubmit","value","onChange","target","onKeyPress","placeholder","rows","disabled","_c","$RefreshReg$"],"sources":["/Users/wang-work/matagent/frontend/src/components/ChatWindow.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { Send, Bot, User, AlertCircle, Info } from 'lucide-react';\nimport ReactMarkdown from 'react-markdown';\nimport remarkMath from 'remark-math';\nimport rehypeKatex from 'rehype-katex';\nimport 'katex/dist/katex.min.css'; // Import KaTeX CSS\nimport ToolCallDisplay from './ToolCallDisplay';\nimport { sendMessage } from '../utils/api'; // Import sendMessage from api.js\n\n// Helper function to group agent steps into logical turns\nconst groupAgentSteps = (steps) => {\n  const grouped = [];\n  let currentGroup = null;\n\n  steps.forEach(step => {\n    if (step.type === 'thought') {\n      if (currentGroup && (currentGroup.tool_calls.length > 0 || currentGroup.tool_output)) {\n        grouped.push(currentGroup);\n      }\n      currentGroup = { thought: step.content, tool_calls: [], tool_output: null };\n    } else if (step.type === 'tool_calls') {\n      if (!currentGroup) {\n        currentGroup = { thought: null, tool_calls: [], tool_output: null };\n      }\n      currentGroup.tool_calls = currentGroup.tool_calls.concat(step.content); // step.content is now the tool_calls array\n    } else if (step.type === 'tool_output') {\n      if (!currentGroup) {\n        currentGroup = { thought: null, tool_calls: [], tool_output: null };\n      }\n      currentGroup.tool_output = step.content.output; // step.content is now the tool_output object\n      grouped.push(currentGroup); // Tool output usually marks the end of a step\n      currentGroup = null; // Reset for next group\n    } else if (step.type === 'final_answer') {\n      if (currentGroup) {\n        grouped.push(currentGroup);\n      }\n      // Final answer is handled separately, not grouped as a step\n    }\n  });\n\n  if (currentGroup) {\n    grouped.push(currentGroup);\n  }\n  return grouped;\n};\n\nconst ChatWindow = ({\n  conversation,\n  onSendMessage,\n  onUpdateTitle,\n  isLoading,\n  setIsLoading\n}) => {\n  const [inputValue, setInputValue] = useState('');\n  const [currentAssistantMessage, setCurrentAssistantMessage] = useState(null);\n  const messagesEndRef = useRef(null);\n  const textareaRef = useRef(null);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [conversation?.messages, currentAssistantMessage]);\n\n  // Effect to add the completed assistant message to conversation messages\n  useEffect(() => {\n    if (currentAssistantMessage && !isLoading && conversation) {\n      onSendMessage(conversation.id, currentAssistantMessage);\n      setCurrentAssistantMessage(null); // Clear current message\n    }\n  }, [isLoading, currentAssistantMessage, conversation, onSendMessage]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!inputValue.trim() || isLoading || !conversation) return;\n\n    const userMessage = {\n      id: Date.now().toString(),\n      type: 'user',\n      content: inputValue.trim(),\n      timestamp: new Date().toISOString()\n    };\n\n    onSendMessage(conversation.id, userMessage);\n\n    if (conversation.messages.length === 0) {\n      const title = inputValue.trim().length > 30\n        ? inputValue.trim().substring(0, 30) + '...'\n        : inputValue.trim();\n      onUpdateTitle(conversation.id, title);\n    }\n\n    const currentInput = inputValue;\n    setInputValue('');\n    setIsLoading(true);\n\n    // Initialize a new assistant message for streaming\n    const newAssistantMessage = {\n      id: (Date.now() + 1).toString(),\n      type: 'assistant',\n      content: '',\n      timestamp: new Date().toISOString(),\n      agent_steps: [],\n      status: 'pending',\n    };\n    setCurrentAssistantMessage(newAssistantMessage);\n\n    try {\n      await sendMessage(currentInput, conversation.id, (step) => {\n        setCurrentAssistantMessage(prev => {\n          const updatedMessage = { ...prev };\n          if (step.type === 'final_answer') {\n            updatedMessage.content = step.content;\n            updatedMessage.status = 'success';\n          } else if (step.type === 'error') {\n            updatedMessage.content = step.content;\n            updatedMessage.status = 'error';\n          } else {\n            // For thought, tool_calls, tool_output, append to agent_steps\n            updatedMessage.agent_steps = [...updatedMessage.agent_steps, step];\n          }\n          return updatedMessage;\n        });\n      });\n    } catch (error) {\n      console.error('Error sending message:', error);\n      setCurrentAssistantMessage(prev => ({\n        ...prev,\n        content: `抱歉，发生了错误：${error.message || '未知错误'}。请稍后再试。`,\n        status: 'error',\n      }));\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSubmit(e);\n    }\n  };\n\n  const adjustTextareaHeight = () => {\n    const textarea = textareaRef.current;\n    if (textarea) {\n      textarea.style.height = 'auto';\n      textarea.style.height = Math.min(textarea.scrollHeight, 120) + 'px';\n    }\n  };\n\n  useEffect(() => {\n    adjustTextareaHeight();\n  }, [inputValue]);\n\n  const formatTime = (timestamp) => {\n    return new Date(timestamp).toLocaleTimeString('zh-CN', {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  if (!conversation) {\n    return (\n      <div className=\"chat-window\">\n        <div className=\"empty-state\">\n          <div className=\"empty-state-icon\">🧬</div>\n          <h3>欢迎使用 BioaGen Agent</h3>\n          <p>\n            这是一个基于AI的生物分子分析助手。您可以询问有关分子结构、性质预测、\n            化学反应等相关问题。点击左侧\"新建对话\"开始您的分析之旅。\n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"chat-window\">\n      <div className=\"chat-header\">\n        <div className=\"chat-title\">{conversation.title}</div>\n      </div>\n\n      {conversation.available_tools && conversation.available_tools.length > 0 && (\n        <div className=\"available-tools-list\">\n          <h4>Available Tools:</h4>\n          <ul>\n            {conversation.available_tools.map((tool, index) => (\n              <li key={index}>\n                <strong>{tool.function.name}</strong>: {tool.function.description}\n              </li>\n            ))}\n          </ul>\n        </div>\n      )}\n\n      <div className=\"chat-messages\">\n        {conversation.messages.map((message) => (\n          <div key={message.id} className={`message ${message.type}`}>\n            <div className=\"message-avatar\">\n              {message.type === 'user' ? <User size={16} /> : <Bot size={16} />}\n            </div>\n            <div className=\"message-content\">\n              {message.agent_steps && message.agent_steps.length > 0 && (\n                <div className=\"agent-steps-container\">\n                  {groupAgentSteps(message.agent_steps).map((stepGroup, groupIndex) => (\n                    <div key={groupIndex} className=\"agent-step-group\">\n                      <h4>步骤 {groupIndex + 1}</h4>\n                      {stepGroup.thought && (\n                        <div className=\"agent-thought\">\n                          <strong>Agent Thought:</strong> <ReactMarkdown>{stepGroup.thought}</ReactMarkdown>\n                        </div>\n                      )}\n                      {stepGroup.tool_calls && stepGroup.tool_calls.length > 0 && (\n                        <div className=\"agent-tool-calls\">\n                          <strong>Tool Calls:</strong>\n                          <ToolCallDisplay toolCalls={stepGroup.tool_calls} />\n                        </div>\n                      )}\n                      {stepGroup.tool_output && (\n                        <div className=\"agent-tool-output\">\n                          <strong>Tool Output:</strong> <ReactMarkdown>{JSON.stringify(stepGroup.tool_output)}</ReactMarkdown>\n                        </div>\n                      )}\n                    </div>\n                  ))}\n                </div>\n              )}\n              <ReactMarkdown\n                remarkPlugins={[remarkMath]}\n                rehypePlugins={[rehypeKatex]}\n              >{message.content}</ReactMarkdown>\n\n              {/* Display status indicator */}\n              {message.status && message.status !== 'success' && (\n                <div className={`message-status ${message.status}`}>\n                  {message.status === 'error' && <AlertCircle size={14} />}\n                  {message.status === 'warning' && <Info size={14} />}\n                  <span>{message.status === 'error' ? '执行失败' : '部分成功'}</span>\n                </div>\n              )}\n\n              <div className=\"message-time\">\n                {formatTime(message.timestamp)}\n              </div>\n            </div>\n          </div>\n        ))}\n\n        {/* Display the current streaming message */}\n        {currentAssistantMessage && (\n          <div className=\"message assistant\">\n            <div className=\"message-avatar\">\n              <Bot size={16} />\n            </div>\n            <div className=\"message-content\">\n              {currentAssistantMessage.agent_steps && currentAssistantMessage.agent_steps.length > 0 && (\n                <div className=\"agent-steps-container\">\n                  {groupAgentSteps(currentAssistantMessage.agent_steps).map((stepGroup, groupIndex) => (\n                    <div key={groupIndex} className=\"agent-step-group\">\n                      <h4>步骤 {groupIndex + 1}</h4>\n                      {stepGroup.thought && (\n                        <div className=\"agent-thought\">\n                          <strong>Agent Thought:</strong> <ReactMarkdown>{stepGroup.thought}</ReactMarkdown>\n                        </div>\n                      )}\n                      {stepGroup.tool_calls && stepGroup.tool_calls.length > 0 && (\n                        <div className=\"agent-tool-calls\">\n                          <strong>Tool Calls:</strong>\n                          <ToolCallDisplay toolCalls={stepGroup.tool_calls} />\n                        </div>\n                      )}\n                      {stepGroup.tool_output && (\n                        <div className=\"agent-tool-output\">\n                          <strong>Tool Output:</strong> <ReactMarkdown>{JSON.stringify(stepGroup.tool_output)}</ReactMarkdown>\n                        </div>\n                      )}\n                    </div>\n                  ))}\n                </div>\n              )}\n              <ReactMarkdown\n                remarkPlugins={[remarkMath]}\n                rehypePlugins={[rehypeKatex]}\n              >{currentAssistantMessage.content}</ReactMarkdown>\n              {isLoading && (\n                <div className=\"loading-message\">\n                  正在思考中\n                  <div className=\"loading-dots\">\n                    <div className=\"loading-dot\"></div>\n                    <div className=\"loading-dot\"></div>\n                    <div className=\"loading-dot\"></div>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n\n        {isLoading && !currentAssistantMessage && (\n          <div className=\"message assistant\">\n            <div className=\"message-avatar\">\n              <Bot size={16} />\n            </div>\n            <div className=\"message-content\">\n              <div className=\"loading-message\">\n                正在思考中\n                <div className=\"loading-dots\">\n                  <div className=\"loading-dot\"></div>\n                  <div className=\"loading-dot\"></div>\n                  <div className=\"loading-dot\"></div>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n        <div ref={messagesEndRef} />\n      </div>\n\n      <div className=\"chat-input-container\">\n        <form className=\"chat-input-form\" onSubmit={handleSubmit}>\n          <textarea\n            ref={textareaRef}\n            value={inputValue}\n            onChange={(e) => setInputValue(e.target.value)}\n            onKeyPress={handleKeyPress}\n            placeholder=\"输入您的问题...例如：分析乙醇分子的性质\"\n            className=\"chat-input\"\n            rows={1}\n            disabled={isLoading}\n          />\n          <button\n            type=\"submit\"\n            className=\"send-btn\"\n            disabled={!inputValue.trim() || isLoading}\n          >\n            <Send size={16} />\n            发送\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default ChatWindow;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}